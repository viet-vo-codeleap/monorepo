2026-01-05T09:20:33.4089225Z Current runner version: '2.330.0'
2026-01-05T09:20:33.4113404Z ##[group]Runner Image Provisioner
2026-01-05T09:20:33.4114271Z Hosted Compute Agent
2026-01-05T09:20:33.4114909Z Version: 20251211.462
2026-01-05T09:20:33.4115585Z Commit: 6cbad8c2bb55d58165063d031ccabf57e2d2db61
2026-01-05T09:20:33.4116331Z Build Date: 2025-12-11T16:28:49Z
2026-01-05T09:20:33.4117118Z Worker ID: {504ebbd2-4d7b-428b-9d36-f33199cd0f15}
2026-01-05T09:20:33.4118195Z ##[endgroup]
2026-01-05T09:20:33.4118753Z ##[group]Operating System
2026-01-05T09:20:33.4119453Z Ubuntu
2026-01-05T09:20:33.4119966Z 24.04.3
2026-01-05T09:20:33.4120411Z LTS
2026-01-05T09:20:33.4121047Z ##[endgroup]
2026-01-05T09:20:33.4121592Z ##[group]Runner Image
2026-01-05T09:20:33.4122250Z Image: ubuntu-24.04
2026-01-05T09:20:33.4122836Z Version: 20251215.174.1
2026-01-05T09:20:33.4123932Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20251215.174/images/ubuntu/Ubuntu2404-Readme.md
2026-01-05T09:20:33.4125659Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20251215.174
2026-01-05T09:20:33.4126655Z ##[endgroup]
2026-01-05T09:20:33.4128301Z ##[group]GITHUB_TOKEN Permissions
2026-01-05T09:20:33.4130134Z Contents: read
2026-01-05T09:20:33.4130888Z Metadata: read
2026-01-05T09:20:33.4131442Z Packages: read
2026-01-05T09:20:33.4131927Z ##[endgroup]
2026-01-05T09:20:33.4134013Z Secret source: Actions
2026-01-05T09:20:33.4134748Z Prepare workflow directory
2026-01-05T09:20:33.4508617Z Prepare all required actions
2026-01-05T09:20:33.4554907Z Getting action download info
2026-01-05T09:20:33.8885201Z Download action repository 'appleboy/ssh-action@v1.0.3' (SHA:029f5b4aeeeb58fdfe1410a5d17f967dacf36262)
2026-01-05T09:20:34.5090957Z Complete job name: deploy
2026-01-05T09:20:34.5650991Z ##[group]Build container for action use: '/home/runner/work/_actions/appleboy/ssh-action/v1.0.3/Dockerfile'.
2026-01-05T09:20:34.5700891Z ##[command]/usr/bin/docker build -t bec720:30553a4216284a09b9e33343c107beb8 -f "/home/runner/work/_actions/appleboy/ssh-action/v1.0.3/Dockerfile" "/home/runner/work/_actions/appleboy/ssh-action/v1.0.3"
2026-01-05T09:20:35.0881148Z #0 building with "default" instance using docker driver
2026-01-05T09:20:35.0882330Z 
2026-01-05T09:20:35.0882769Z #1 [internal] load build definition from Dockerfile
2026-01-05T09:20:35.0883661Z #1 transferring dockerfile: 149B done
2026-01-05T09:20:35.0884230Z #1 DONE 0.0s
2026-01-05T09:20:35.0884482Z 
2026-01-05T09:20:35.0884836Z #2 [internal] load metadata for ghcr.io/appleboy/drone-ssh:1.7.3
2026-01-05T09:20:35.6872778Z #2 DONE 0.7s
2026-01-05T09:20:35.8033700Z 
2026-01-05T09:20:35.8034099Z #3 [internal] load .dockerignore
2026-01-05T09:20:35.8034958Z #3 transferring context: 2B done
2026-01-05T09:20:35.8035526Z #3 DONE 0.0s
2026-01-05T09:20:35.8035759Z 
2026-01-05T09:20:35.8035994Z #4 [internal] load build context
2026-01-05T09:20:35.8036515Z #4 transferring context: 108B done
2026-01-05T09:20:35.8037012Z #4 DONE 0.0s
2026-01-05T09:20:35.8037223Z 
2026-01-05T09:20:35.8037910Z #5 [1/2] FROM ghcr.io/appleboy/drone-ssh:1.7.3@sha256:179cbd253771007f2ebcaf7a3860afe059207351de1f3378efafac93bd310158
2026-01-05T09:20:35.8038980Z #5 resolve ghcr.io/appleboy/drone-ssh:1.7.3@sha256:179cbd253771007f2ebcaf7a3860afe059207351de1f3378efafac93bd310158 done
2026-01-05T09:20:35.8039932Z #5 sha256:7e20f48a19643465f486f59127b8f4e0f4114bedc8bd5260fb4f92d5fda95f1c 0B / 1.20kB 0.1s
2026-01-05T09:20:35.8040780Z #5 sha256:179cbd253771007f2ebcaf7a3860afe059207351de1f3378efafac93bd310158 2.38kB / 2.38kB done
2026-01-05T09:20:35.8041649Z #5 sha256:1a52f94820e830bc9734623deb03bbafa6a248fba19cdc2e5605c70d90d91441 1.24kB / 1.24kB done
2026-01-05T09:20:35.8042520Z #5 sha256:c4781b8d012b16b6c7468dc9104fad0a63f2a8815b2af8b7176bb544253ea8c7 3.86kB / 3.86kB done
2026-01-05T09:20:35.8043397Z #5 sha256:1207c741d8c9b028d98c4006013f9de959da3c55f85b91ed5e4583438a0112ca 0B / 3.38MB 0.1s
2026-01-05T09:20:35.8044287Z #5 sha256:654aaee5654be60f81172539ecd74485cf8bbe2e9137bab0d429862c31c676f6 0B / 284.83kB 0.1s
2026-01-05T09:20:35.9347858Z #5 sha256:7e20f48a19643465f486f59127b8f4e0f4114bedc8bd5260fb4f92d5fda95f1c 1.20kB / 1.20kB 0.2s done
2026-01-05T09:20:35.9349559Z #5 sha256:1207c741d8c9b028d98c4006013f9de959da3c55f85b91ed5e4583438a0112ca 3.38MB / 3.38MB 0.1s done
2026-01-05T09:20:35.9351153Z #5 sha256:654aaee5654be60f81172539ecd74485cf8bbe2e9137bab0d429862c31c676f6 284.83kB / 284.83kB 0.2s done
2026-01-05T09:20:35.9352809Z #5 extracting sha256:1207c741d8c9b028d98c4006013f9de959da3c55f85b91ed5e4583438a0112ca 0.1s done
2026-01-05T09:20:35.9354374Z #5 sha256:066e5b821e26d8313055e0314c056e6c297847bcf963e5df10e7aa03107f2246 0B / 125B 0.2s
2026-01-05T09:20:35.9355891Z #5 sha256:47353a6f9201a145b687290e5ae0278ac269faf4bb61bee3e9246c37a8d74277 0B / 2.44MB 0.2s
2026-01-05T09:20:35.9357644Z #5 extracting sha256:654aaee5654be60f81172539ecd74485cf8bbe2e9137bab0d429862c31c676f6
2026-01-05T09:20:36.0396671Z #5 sha256:066e5b821e26d8313055e0314c056e6c297847bcf963e5df10e7aa03107f2246 125B / 125B 0.2s done
2026-01-05T09:20:36.0401216Z #5 sha256:47353a6f9201a145b687290e5ae0278ac269faf4bb61bee3e9246c37a8d74277 2.44MB / 2.44MB 0.3s done
2026-01-05T09:20:36.0402694Z #5 extracting sha256:654aaee5654be60f81172539ecd74485cf8bbe2e9137bab0d429862c31c676f6 0.0s done
2026-01-05T09:20:36.0403936Z #5 extracting sha256:7e20f48a19643465f486f59127b8f4e0f4114bedc8bd5260fb4f92d5fda95f1c
2026-01-05T09:20:36.2751917Z #5 extracting sha256:7e20f48a19643465f486f59127b8f4e0f4114bedc8bd5260fb4f92d5fda95f1c done
2026-01-05T09:20:36.2752896Z #5 extracting sha256:066e5b821e26d8313055e0314c056e6c297847bcf963e5df10e7aa03107f2246 done
2026-01-05T09:20:36.2753782Z #5 extracting sha256:47353a6f9201a145b687290e5ae0278ac269faf4bb61bee3e9246c37a8d74277 0.0s done
2026-01-05T09:20:36.2754373Z #5 DONE 0.4s
2026-01-05T09:20:36.2754778Z 
2026-01-05T09:20:36.2754947Z #6 [2/2] COPY entrypoint.sh /bin/entrypoint.sh
2026-01-05T09:20:36.2755304Z #6 DONE 0.0s
2026-01-05T09:20:36.2755446Z 
2026-01-05T09:20:36.2755565Z #7 exporting to image
2026-01-05T09:20:36.2755850Z #7 exporting layers
2026-01-05T09:20:37.0044127Z #7 exporting layers 0.9s done
2026-01-05T09:20:37.0228514Z #7 writing image sha256:9d1359f810f1311943d4c1ca6fc8f65194fb84ab92e1c7ca37062a620081c8a5 done
2026-01-05T09:20:37.0229357Z #7 naming to docker.io/library/bec720:30553a4216284a09b9e33343c107beb8 done
2026-01-05T09:20:37.0230132Z #7 DONE 0.9s
2026-01-05T09:20:37.0292885Z ##[endgroup]
2026-01-05T09:20:37.0567025Z ##[group]Run appleboy/ssh-action@v1.0.3
2026-01-05T09:20:37.0567885Z with:
2026-01-05T09:20:37.0568381Z   host: ***
2026-01-05T09:20:37.0568646Z   username: ***
2026-01-05T09:20:37.0568923Z   password: ***
2026-01-05T09:20:37.0569220Z   envs: ACR_LOGIN_SERVER,ACR_NAME,IMAGE_NAME,IMAGE_TAG
2026-01-05T09:20:37.0570628Z   script: # Login to ACR using VM's managed identity
az login --identity
az acr login --name $ACR_NAME

# Update docker-compose.yml with new image tag
cd /home/***/sample-angular-19
yq -i ".services.angular-app.image = \"$ACR_LOGIN_SERVER/$IMAGE_NAME:$IMAGE_TAG\"" docker-compose.yml

# Restart with new image
docker compose down
docker compose up -d

echo "Deployed $IMAGE_NAME:$IMAGE_TAG"

2026-01-05T09:20:37.0571960Z   port: 22
2026-01-05T09:20:37.0572187Z   timeout: 30s
2026-01-05T09:20:37.0572431Z   command_timeout: 10m
2026-01-05T09:20:37.0572694Z   proxy_port: 22
2026-01-05T09:20:37.0572936Z   proxy_timeout: 30s
2026-01-05T09:20:37.0573412Z env:
2026-01-05T09:20:37.0573701Z   IMAGE_NAME: sample-angular-19
2026-01-05T09:20:37.0574096Z   ACR_LOGIN_SERVER: ***
2026-01-05T09:20:37.0574388Z   ACR_NAME: ***
2026-01-05T09:20:37.0574625Z   IMAGE_TAG: b53a96a
2026-01-05T09:20:37.0574870Z ##[endgroup]
2026-01-05T09:20:37.0694153Z ##[command]/usr/bin/docker run --name bec72030553a4216284a09b9e33343c107beb8_95ec0d --label bec720 --workdir /github/workspace --rm -e "IMAGE_NAME" -e "ACR_LOGIN_SERVER" -e "ACR_NAME" -e "IMAGE_TAG" -e "INPUT_HOST" -e "INPUT_USERNAME" -e "INPUT_PASSWORD" -e "INPUT_ENVS" -e "INPUT_SCRIPT" -e "INPUT_PORT" -e "INPUT_PASSPHRASE" -e "INPUT_SYNC" -e "INPUT_USE_INSECURE_CIPHER" -e "INPUT_CIPHER" -e "INPUT_TIMEOUT" -e "INPUT_COMMAND_TIMEOUT" -e "INPUT_KEY" -e "INPUT_KEY_PATH" -e "INPUT_FINGERPRINT" -e "INPUT_PROXY_HOST" -e "INPUT_PROXY_PORT" -e "INPUT_PROXY_USERNAME" -e "INPUT_PROXY_PASSWORD" -e "INPUT_PROXY_PASSPHRASE" -e "INPUT_PROXY_TIMEOUT" -e "INPUT_PROXY_KEY" -e "INPUT_PROXY_KEY_PATH" -e "INPUT_PROXY_FINGERPRINT" -e "INPUT_PROXY_CIPHER" -e "INPUT_PROXY_USE_INSECURE_CIPHER" -e "INPUT_SCRIPT_STOP" -e "INPUT_ENVS_FORMAT" -e "INPUT_DEBUG" -e "INPUT_ALLENVS" -e "INPUT_REQUEST_PTY" -e "HOME" -e "GITHUB_JOB" -e "GITHUB_REF" -e "GITHUB_SHA" -e "GITHUB_REPOSITORY" -e "GITHUB_REPOSITORY_OWNER" -e "GITHUB_REPOSITORY_OWNER_ID" -e "GITHUB_RUN_ID" -e "GITHUB_RUN_NUMBER" -e "GITHUB_RETENTION_DAYS" -e "GITHUB_RUN_ATTEMPT" -e "GITHUB_ACTOR_ID" -e "GITHUB_ACTOR" -e "GITHUB_WORKFLOW" -e "GITHUB_HEAD_REF" -e "GITHUB_BASE_REF" -e "GITHUB_EVENT_NAME" -e "GITHUB_SERVER_URL" -e "GITHUB_API_URL" -e "GITHUB_GRAPHQL_URL" -e "GITHUB_REF_NAME" -e "GITHUB_REF_PROTECTED" -e "GITHUB_REF_TYPE" -e "GITHUB_WORKFLOW_REF" -e "GITHUB_WORKFLOW_SHA" -e "GITHUB_REPOSITORY_ID" -e "GITHUB_TRIGGERING_ACTOR" -e "GITHUB_WORKSPACE" -e "GITHUB_ACTION" -e "GITHUB_EVENT_PATH" -e "GITHUB_ACTION_REPOSITORY" -e "GITHUB_ACTION_REF" -e "GITHUB_PATH" -e "GITHUB_ENV" -e "GITHUB_STEP_SUMMARY" -e "GITHUB_STATE" -e "GITHUB_OUTPUT" -e "RUNNER_OS" -e "RUNNER_ARCH" -e "RUNNER_NAME" -e "RUNNER_ENVIRONMENT" -e "RUNNER_TOOL_CACHE" -e "RUNNER_TEMP" -e "RUNNER_WORKSPACE" -e "ACTIONS_RUNTIME_URL" -e "ACTIONS_RUNTIME_TOKEN" -e "ACTIONS_CACHE_URL" -e "ACTIONS_RESULTS_URL" -e GITHUB_ACTIONS=true -e CI=true -v "/var/run/docker.sock":"/var/run/docker.sock" -v "/home/runner/work/_temp":"/github/runner_temp" -v "/home/runner/work/_temp/_github_home":"/github/home" -v "/home/runner/work/_temp/_github_workflow":"/github/workflow" -v "/home/runner/work/_temp/_runner_file_commands":"/github/file_commands" -v "/home/runner/work/deploy-angular-app/deploy-angular-app":"/github/workspace" bec720:30553a4216284a09b9e33343c107beb8
2026-01-05T09:20:37.2578397Z ======CMD======
2026-01-05T09:20:37.2578932Z # Login to ACR using VM's managed identity
2026-01-05T09:20:37.2579294Z az login --identity
2026-01-05T09:20:37.2579566Z az acr login --name $ACR_NAME
2026-01-05T09:20:37.2579835Z 
2026-01-05T09:20:37.2580033Z # Update docker-compose.yml with new image tag
2026-01-05T09:20:37.2580592Z cd /home/***/sample-angular-19
2026-01-05T09:20:37.2581422Z yq -i ".services.angular-app.image = \"$ACR_LOGIN_SERVER/$IMAGE_NAME:$IMAGE_TAG\"" docker-compose.yml
2026-01-05T09:20:37.2581847Z 
2026-01-05T09:20:37.2581972Z # Restart with new image
2026-01-05T09:20:37.2582243Z docker compose down
2026-01-05T09:20:37.2582500Z docker compose up -d
2026-01-05T09:20:37.2582737Z 
2026-01-05T09:20:37.2582861Z echo "Deployed $IMAGE_NAME:$IMAGE_TAG"
2026-01-05T09:20:37.2583120Z 
2026-01-05T09:20:37.2583219Z ======END======
2026-01-05T09:20:41.5523102Z out: [
2026-01-05T09:20:41.5523534Z out:   {
2026-01-05T09:20:41.5524009Z out:     "environmentName": "AzureCloud",
2026-01-05T09:20:41.5524809Z out:     "homeTenantId": "5f431148-1e24-4600-af0b-cdaeeffa6045",
2026-01-05T09:20:41.5525650Z out:     "id": "740159ba-9a7b-4b1b-b55d-d992c0326f49",
2026-01-05T09:20:41.5526290Z out:     "isDefault": true,
2026-01-05T09:20:41.5526830Z out:     "managedByTenants": [
2026-01-05T09:20:41.5527675Z out:       {
2026-01-05T09:20:41.5528393Z out:         "tenantId": "7c0c8a7b-6f60-4a8c-bd28-247cae9c0f0c"
2026-01-05T09:20:41.5529105Z out:       }
2026-01-05T09:20:41.5529611Z out:     ],
2026-01-05T09:20:41.5530038Z out:     "name": "Code Learning",
2026-01-05T09:20:41.5530604Z out:     "state": "Enabled",
2026-01-05T09:20:41.5531245Z out:     "tenantId": "5f431148-1e24-4600-af0b-cdaeeffa6045",
2026-01-05T09:20:41.5531958Z out:     "user": {
2026-01-05T09:20:41.5532443Z out:       "assignedIdentityInfo": "MSI",
2026-01-05T09:20:41.5532973Z out:       "name": "systemAssignedIdentity",
2026-01-05T09:20:41.5533482Z out:       "type": "servicePrincipal"
2026-01-05T09:20:41.5533913Z out:     }
2026-01-05T09:20:41.5534211Z out:   }
2026-01-05T09:20:41.5534851Z out: ]
2026-01-05T09:20:43.0974156Z out: Login Succeeded
2026-01-05T09:20:43.3518927Z err: time="2026-01-05T09:20:43Z" level=warning msg="/home/***/sample-angular-19/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
2026-01-05T09:20:43.3545262Z err: time="2026-01-05T09:20:43Z" level=warning msg="Warning: No resource found to remove for project \"sample-angular-19\"."
2026-01-05T09:20:43.4143504Z err: time="2026-01-05T09:20:43Z" level=warning msg="/home/***/sample-angular-19/docker-compose.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion"
2026-01-05T09:20:43.4183514Z err:  Image ***/sample-angular-19:b53a96a Pulling 
2026-01-05T09:20:43.7942783Z err:  f2748f5c86e0  
2026-01-05T09:20:43.7946360Z err:  e7a4d1550370  
2026-01-05T09:20:43.9313426Z err:  e7a4d1550370  
2026-01-05T09:20:43.9313951Z err:  f2748f5c86e0  
2026-01-05T09:20:44.0322574Z err:  e7a4d1550370  
2026-01-05T09:20:44.0382130Z err:  f2748f5c86e0  
2026-01-05T09:20:44.0515082Z err:  Image ***/sample-angular-19:b53a96a Pulled 
2026-01-05T09:20:44.0785587Z err:  Container sample-angular-19 Creating 
2026-01-05T09:20:44.2831618Z err:  Container sample-angular-19 Created 
2026-01-05T09:20:44.2908508Z err:  Container sample-angular-19 Starting 
2026-01-05T09:20:44.5460531Z err:  Container sample-angular-19 Started 
2026-01-05T09:20:44.5508795Z out: Deployed sample-angular-19:b53a96a
2026-01-05T09:20:44.5512405Z ==============================================
2026-01-05T09:20:44.5624971Z âœ… Successfully executed commands to all host.
2026-01-05T09:20:44.5625491Z ==============================================
2026-01-05T09:20:44.6292714Z Cleaning up orphan processes